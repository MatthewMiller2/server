--source include/have_sequence.inc

CREATE TABLE t1(a INT, b INT, c INT, KEY(b), KEY(a));
INSERT INTO t1 SELECT seq, seq, seq from seq_1_to_100;

CREATE TABLE t2(a INT, b INT, key(b));
INSERT INTO t2 SELECT seq, seq from seq_1_to_100;

SET optimizer_trace=1;
SET optimizer_switch='rowid_filter=off';

--echo #
--echo # RUNNING the join cardinality tests when statistics are available only from indexes
--echo #

--source include/join_cardinality.inc

DROP TABLE t1,t2;

CREATE TABLE t1(a INT, b INT, c INT);
INSERT INTO t1 SELECT seq, seq, seq from seq_1_to_100;

CREATE TABLE t2(a INT, b INT);
INSERT INTO t2 SELECT seq, seq from seq_1_to_100;

--disable_result_log
--disable_query_log
ANALYZE TABLE t1 PERSISTENT FOR COLUMNS(a,b) INDEXES();
ANALYZE TABLE t2 PERSISTENT FOR ALL;
--enable_query_log
--enable_result_log

--echo #
--echo # RUNNING the join cardinality tests when only EITS statistics are available
--echo #

--source include/join_cardinality.inc

DROP TABLE t1,t2;
